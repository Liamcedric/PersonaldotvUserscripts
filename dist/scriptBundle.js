JSON.parse(localStorage.getItem("scriptSettings"))?.smartGreaterGrit&&async function t(){let e=await async function(){let t;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.lesser-draught-of-grit",{headers:{authorization:this.localStorage.token}}).then((t=>t.json())).then((e=>{if(e.success)t=1800;else{let s=e.errorMsg.match(/\d+/);t=s?parseInt(s[0]):60}})),t}();setTimeout(t,1e3*(e+1))}(),JSON.parse(localStorage.getItem("scriptSettings"))?.smartThiadoranFigGrit&&async function t(){let e=await async function(){let t;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.lesser-draught-of-grit",{headers:{authorization:this.localStorage.token}}).then((t=>t.json())).then((e=>{if(e.success)t=7200;else{let s=e.errorMsg.match(/\d+/);t=s?parseInt(s[0]):60}})),t}();setTimeout(t,1e3*(e+1))}(),JSON.parse(localStorage.getItem("scriptSettings"))?.smartIllOmensGrit&&async function t(){let e=await async function(){let t;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.lesser-draught-of-grit",{headers:{authorization:this.localStorage.token}}).then((t=>t.json())).then((e=>{if(e.success)t=2700;else{let s=e.errorMsg.match(/\d+/);t=s?parseInt(s[0]):60}})),t}();setTimeout(t,1e3*(e+1))}(),JSON.parse(localStorage.getItem("scriptSettings"))?.smartAutoHeal&&async function t(){let e=await async function(){let t;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.healing-potion",{headers:{authorization:this.localStorage.token}}).then((t=>t.json())).then((e=>{if(e.success)t=360;else{let s=e.errorMsg.match(/\d+/);t=s?parseInt(s[0]):60}})),t}();setTimeout(t,1e3*(e+1))}(),JSON.parse(localStorage.getItem("scriptSettings"))?.smartAutoHeal2&&async function t(){let e=await async function(){let t;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.gipantan-health-potion",{headers:{authorization:this.localStorage.token}}).then((t=>t.json())).then((e=>{if(e.success)t=480;else{let s=e.errorMsg.match(/\d+/);t=s?parseInt(s[0]):60}})),t}();setTimeout(t,1e3*(e+1))}(),scripts=["smartAutoHeal","smartAutoHeal2","smartLesserGrit","smartGrit","smartGreaterGrit","smartThiadoranFigGrit","smartIllOmensGrit","dailyStats","raidInfo"],settings=function(){if(null===localStorage.getItem("scriptSettings")){const t=scripts.reduce(((t,e)=>(t[e]=!1,t)),{});localStorage.setItem("scriptSettings",JSON.stringify(t))}else{const t=JSON.parse(localStorage.getItem("scriptSettings")),e=scripts.filter((e=>void 0===t[e]));e.length>0&&(e.forEach((e=>{t[e]=!1})),localStorage.setItem("scriptSettings",JSON.stringify(t)))}return JSON.parse(localStorage.getItem("scriptSettings"))}(),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t instanceof Element&&t.classList.contains("modal-shell")&&function(){const t=document.getElementById("settings");if(null===t)return;const e=document.createElement("fieldset");e.style.borderRadius="5px",e.style.backgroundColor="#252525",e.style.padding="20px",e.style.borderColor="#a0725f";const s=document.createElement("legend");s.innerText="Scripts",s.style.fontSize="36px",s.style.fontWeight="bold";const n=document.createElement("div");e.appendChild(s),e.appendChild(n),t.appendChild(e),Object.entries(settings).forEach((([t,e])=>{const s=document.createElement("input");s.type="checkbox",s.checked=e,s.style.marginRight="10px",s.style.width="20px",s.style.height="20px",s.addEventListener("change",(()=>{settings[t]=s.checked,localStorage.setItem("scriptSettings",JSON.stringify(settings)),console.log(settings)}));const a=document.createElement("label");a.appendChild(s),a.appendChild(document.createTextNode(t.replace(/([A-Z])/g," $1"))),a.style.marginBottom="10px",a.style.textTransform="capitalize",a.style.fontSize="24px",a.style.display="block",n.appendChild(a)}))}()}))}))})).observe(document.getElementById("game-view"),{childList:!0,subtree:!0}),JSON.parse(localStorage.getItem("scriptSettings"))?.raidShareGroup&&new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t instanceof Element&&t.querySelector("div.dotv-container.router-container > div:nth-child(7)")&&function(){const t=document.querySelector("#game-view > div > div.dotv-container.router-container > div:nth-child(6) > div > div:nth-child(6)"),e=t?.lastChild?.cloneNode(!0);e.firstChild.classList.add("inactive");const s=e.querySelector("h4").textContent="test";e.addEventListener("click",(()=>{e.firstChild.classList.remove("inactive"),window.history.pushState({},"",`#/${s}-raid`),Array.from(t.childNodes).slice(0,-1).forEach((t=>{t.firstChild.classList.add("inactive")}))})),Array.from(t.childNodes).slice(0,-1).forEach((t=>{t.addEventListener("click",(()=>{e.firstChild.classList.add("inactive")}))})),t?.appendChild(e)}()}))}))})).observe(document.getElementById("game-view"),{childList:!0,subtree:!0}),JSON.parse(localStorage.getItem("scriptSettings"))?.raidInfo&&async function(){raidData=await async function(){return fetch("https://api.dragonsofthevoid.com/api/data/raids",{headers:{authorization:this.localStorage.token}}).then((t=>t.json())).then((t=>t))}(),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t instanceof Element&&t.querySelector(".raid-container .boss-name-container span")&&function(t){const e=Object.values(raidData).find((e=>e.name===t.firstChild.textContent));if(!t.nextSibling.querySelector(".misc")){const e=document.createElement("div");e.classList.add("misc"),e.setAttribute("data-v-624c6570",""),e.setAttribute("style","white-space: pre-line;"),t.nextSibling.appendChild(e)}const s=document.querySelector(".misc");s.style.whiteSpace="pre-line",s.textContent=`${e.races.join(", ")}\nweak: ${e.weakness.join(", ")}\nresist: ${e.resist.join(", ")}`}(t.querySelector(".raid-container .boss-name-container"))}))}))})).observe(document.querySelector("#game-view"),{childList:!0,subtree:!0})}(),(()=>{let t,e;async function s(){e||(e=await async function(){const t=await fetch("https://api.dragonsofthevoid.com/api/user/info",{method:"GET",headers:{authorization:localStorage.token}});return(await t.json()).payload}());const t=function(t){const e=t.inventory.items["p.stats"].qty;let s={constitution:0,strength:0,agility:0,intellect:0,perception:0,leadership:0,vitalitycap:0,energycap:0,honorcap:0,level:0},n=Object.fromEntries(Object.entries(t.user).filter((([t,e])=>s.hasOwnProperty(t))));return n.sp=e,n}(e),s=function(t){let e=-t.level;for(const[s,a]of Object.entries(t))spval="sp"!=s?n(a):a,console.log(`${s}: ${a} = ${spval}`),e+=spval;return console.log(`Total sp: ${e}`),e}(t);yesterdayStats=JSON.parse(localStorage.getItem("dailyStats"));const a=(new Date).toISOString().split("T")[0];if(new Date(a)>new Date(yesterdayStats.lastUpdated)){const e={lastUpdated:a,spVal:s,lvl:t.level};localStorage.setItem("dailyStats",JSON.stringify(e))}return`sp gained: ${s-yesterdayStats.spVal}\nlevel gained: ${t.level-yesterdayStats.lvl}\nReset in: ${function(){let t=new Date,e=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()+1))-t;return`${Math.floor(e/36e5)}h ${Math.floor(e%36e5/6e4)}m ${Math.floor(e%6e4/1e3)}s`}()}\nYesterday Grand Total sp : ${yesterdayStats.spVal}`}function n(t){if(sp=0,t<=1e4)return t;t<=25e3?(sp+=1e4,t-=1e4,inc=1500,startCost=2):(sp+=107495,t-=25e3,inc=1e3,startCost=12);const e=Math.floor(t/inc)+startCost-1,s=e-startCost+1;return sp+=s/2*(startCost+e)*inc,sp+=t%inc*(e+1),sp}JSON.parse(localStorage.getItem("scriptSettings"))?.dailyStats&&async function(){if(null===localStorage.getItem("dailyStats")){const t={lastUpdated:"2021-01-01",spVal:0,lvl:0};localStorage.setItem("dailyStats",JSON.stringify(t))}t=await s(),async function(){let e=null;const n=document.getElementsByClassName("avatar")[0].firstChild;n.addEventListener("mouseover",(()=>{e=document.createElement("div"),e.innerText=t,e.style.position="absolute",e.style.backgroundColor="black",e.style.color="white",e.style.padding="4px",e.style.borderRadius="4px",e.style.zIndex="9999";const a=n.getBoundingClientRect();e.style.left=`${a.left+window.scrollX}px`,e.style.top=`${a.top+window.scrollY}px`,e.style.pointerEvents="none",document.body.appendChild(e),s().then((s=>{e.innerText=s,t=s})).catch((t=>{console.error(t)}))})),n.addEventListener("mouseout",(()=>{e&&(e.remove(),e=null)}))}()}()})();
