JSON.parse(localStorage.getItem("scriptSettings"))?.smartLesserGrit&&async function e(){let t=await async function(){let e;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.lesser-draught-of-grit",{headers:{authorization:this.localStorage.token}}).then((e=>e.json())).then((t=>{if(t.success)e=7200;else{let n=t.errorMsg.match(/\d+/);e=n?parseInt(n[0]):60}})),e}();setTimeout(e,1e3*(t+1))}(),JSON.parse(localStorage.getItem("scriptSettings"))?.smartAutoHeal&&async function e(){let t=await async function(){let e;return await fetch("https://api.dragonsofthevoid.com/api/usable/consume/u.healing-potion",{headers:{authorization:this.localStorage.token}}).then((e=>e.json())).then((t=>{if(t.success)e=360;else{let n=t.errorMsg.match(/\d+/);e=n?parseInt(n[0]):60}})),e}();setTimeout(e,1e3*(t+1))}(),scripts=["smartAutoHeal","smartLesserGrit","dailyStats","raidInfo"],settings=function(){if(null===localStorage.getItem("scriptSettings")){const e=scripts.reduce(((e,t)=>(e[t]=!1,e)),{});localStorage.setItem("scriptSettings",JSON.stringify(e))}else{const e=JSON.parse(localStorage.getItem("scriptSettings")),t=scripts.filter((t=>void 0===e[t]));t.length>0&&(t.forEach((t=>{e[t]=!1})),localStorage.setItem("scriptSettings",JSON.stringify(e)))}return JSON.parse(localStorage.getItem("scriptSettings"))}(),new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof Element&&e.classList.contains("modal-shell")&&function(){const e=document.getElementById("settings");if(null===e)return;const t=document.createElement("fieldset");t.style.borderRadius="5px",t.style.backgroundColor="#252525",t.style.padding="20px",t.style.borderColor="#a0725f";const n=document.createElement("legend");n.innerText="Scripts",n.style.fontSize="36px",n.style.fontWeight="bold";const s=document.createElement("div");t.appendChild(n),t.appendChild(s),e.appendChild(t),Object.entries(settings).forEach((([e,t])=>{const n=document.createElement("input");n.type="checkbox",n.checked=t,n.style.marginRight="10px",n.style.width="20px",n.style.height="20px",n.addEventListener("change",(()=>{settings[e]=n.checked,localStorage.setItem("scriptSettings",JSON.stringify(settings)),console.log(settings)}));const a=document.createElement("label");a.appendChild(n),a.appendChild(document.createTextNode(e.replace(/([A-Z])/g," $1"))),a.style.marginBottom="10px",a.style.textTransform="capitalize",a.style.fontSize="24px",a.style.display="block",s.appendChild(a)}))}()}))}))})).observe(document.getElementById("game-view"),{childList:!0,subtree:!0}),JSON.parse(localStorage.getItem("scriptSettings"))?.raidShareGroup&&new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof Element&&e.querySelector("div.dotv-container.router-container > div:nth-child(7)")&&function(){const e=document.querySelector("#game-view > div > div.dotv-container.router-container > div:nth-child(6) > div > div:nth-child(6)"),t=e?.lastChild?.cloneNode(!0);t.firstChild.classList.add("inactive");const n=t.querySelector("h4").textContent="test";t.addEventListener("click",(()=>{t.firstChild.classList.remove("inactive"),window.history.pushState({},"",`#/${n}-raid`),Array.from(e.childNodes).slice(0,-1).forEach((e=>{e.firstChild.classList.add("inactive")}))})),Array.from(e.childNodes).slice(0,-1).forEach((e=>{e.addEventListener("click",(()=>{t.firstChild.classList.add("inactive")}))})),e?.appendChild(t)}()}))}))})).observe(document.getElementById("game-view"),{childList:!0,subtree:!0}),JSON.parse(localStorage.getItem("scriptSettings"))?.raidInfo&&async function(){raidData=await async function(){return fetch("https://api.dragonsofthevoid.com/api/data/raids",{headers:{authorization:this.localStorage.token}}).then((e=>e.json())).then((e=>e))}(),new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof Element&&e.querySelector(".raid-container .boss-name-container span")&&function(e){const t=Object.values(raidData).find((t=>t.name===e.firstChild.textContent));if(!e.nextSibling.querySelector(".misc")){const t=document.createElement("div");t.classList.add("misc"),t.setAttribute("data-v-624c6570",""),t.setAttribute("style","white-space: pre-line;"),e.nextSibling.appendChild(t)}const n=document.querySelector(".misc");n.style.whiteSpace="pre-line",n.textContent=`${t.races.join(", ")}\nweak: ${t.weakness.join(", ")}\nresist: ${t.resist.join(", ")}`}(e.querySelector(".raid-container .boss-name-container"))}))}))})).observe(document.querySelector("#game-view"),{childList:!0,subtree:!0})}(),(()=>{let e;async function t(){const e=function(e){const t=e.inventory.items["p.stats"].qty;let n={constitution:0,strength:0,agility:0,intellect:0,perception:0,leadership:0,vitalitycap:0,energycap:0,honorcap:0,level:0},s=Object.fromEntries(Object.entries(e.user).filter((([e,t])=>n.hasOwnProperty(e))));return s.sp=t,s}(await async function(){const e=await fetch("https://api.dragonsofthevoid.com/api/user/info",{method:"GET",headers:{authorization:localStorage.token}});return(await e.json()).payload}()),t=function(e){let t=0;for(const[n,s]of Object.entries(e))"level"!==n?t+=s:t-=s;return t}(e);yesterdayStats=JSON.parse(localStorage.getItem("dailyStats"));const n=(new Date).toISOString().split("T")[0];if(new Date(n)>new Date(yesterdayStats.lastUpdated)){const s={lastUpdated:n,spVal:t,lvl:e.level};localStorage.setItem("dailyStats",JSON.stringify(s))}return`sp gained: ${t-yesterdayStats.spVal}\nlevel gained: ${e.level-yesterdayStats.lvl}\nReset in: ${function(){let e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+1))-e;return`${Math.floor(t/36e5)}h ${Math.floor(t%36e5/6e4)}m ${Math.floor(t%6e4/1e3)}s`}()}\nYesterday Grand Total sp : ${yesterdayStats.spVal}`}JSON.parse(localStorage.getItem("scriptSettings"))?.dailyStats&&async function(){if(null===localStorage.getItem("dailyStats")){const e={lastUpdated:"2021-01-01",spVal:0,lvl:0};localStorage.setItem("dailyStats",JSON.stringify(e))}e=await t(),async function(){let n=null;const s=document.getElementsByClassName("avatar")[0].firstChild;s.addEventListener("mouseover",(()=>{n=document.createElement("div"),n.innerText=e,n.style.position="absolute",n.style.backgroundColor="black",n.style.color="white",n.style.padding="4px",n.style.borderRadius="4px",n.style.zIndex="9999";const a=s.getBoundingClientRect();n.style.left=`${a.left+window.scrollX}px`,n.style.top=`${a.top+window.scrollY}px`,n.style.pointerEvents="none",document.body.appendChild(n),t().then((t=>{n.innerText=t,e=t})).catch((e=>{console.error(e)}))})),s.addEventListener("mouseout",(()=>{n&&(n.remove(),n=null)}))}()}()})();